# ATP™ Environment Configuration Template
# Copy this file to .env.production, .env.staging, or .env.development
# and fill in the actual values

# ============================================================================
# CORE ATP™ CONFIGURATION
# ============================================================================

# Environment
NODE_ENV=production
ATP_ENVIRONMENT=production

# ============================================================================
# SERVICE PORTS
# ============================================================================

# Core Services
IDENTITY_SERVICE_PORT=3001
VC_SERVICE_PORT=3002
PERMISSION_SERVICE_PORT=3003
RPC_GATEWAY_PORT=3000
RPC_GATEWAY_HTTPS_PORT=3443
AUDIT_LOGGER_PORT=3005
PROTOCOL_INTEGRATIONS_PORT=3006

# Infrastructure
POSTGRES_PORT=5432
IPFS_API_PORT=5001
IPFS_GATEWAY_PORT=8080
PROMETHEUS_PORT=9090
GRAFANA_PORT=3090
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# PostgreSQL
POSTGRES_HOST=postgres
POSTGRES_DB=atp_production
POSTGRES_USER=atp_user
POSTGRES_PASSWORD=CHANGE_THIS_SECURE_PASSWORD_IN_PRODUCTION
POSTGRES_MAX_CONNECTIONS=20
POSTGRES_CONNECTION_TIMEOUT=30000

# Database URLs
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}
IDENTITY_DB_URL=${DATABASE_URL}
VC_DB_URL=${DATABASE_URL}
PERMISSION_DB_URL=${DATABASE_URL}
AUDIT_DB_URL=${DATABASE_URL}

# ============================================================================
# SECURITY & ENCRYPTION
# ============================================================================

# JWT Configuration
JWT_SECRET=GENERATE_STRONG_JWT_SECRET_FOR_PRODUCTION
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# Encryption Keys (Generate with: openssl rand -hex 32)
AUDIT_ENCRYPTION_KEY=GENERATE_32_BYTE_HEX_KEY_FOR_AUDIT_ENCRYPTION
SERVICE_ENCRYPTION_KEY=GENERATE_32_BYTE_HEX_KEY_FOR_SERVICE_ENCRYPTION
MASTER_ENCRYPTION_KEY=GENERATE_32_BYTE_HEX_KEY_FOR_MASTER_ENCRYPTION

# DID & Certificate Authority
DID_METHOD=atp
DID_NETWORK=mainnet
CA_PRIVATE_KEY_PATH=/secrets/ca-private-key.pem
CA_CERTIFICATE_PATH=/secrets/ca-certificate.pem
CA_PASSPHRASE=SECURE_CA_PASSPHRASE_FOR_PRODUCTION

# TLS/SSL Configuration
TLS_CERT_PATH=/ssl/atp-certificate.pem
TLS_KEY_PATH=/ssl/atp-private-key.pem
TLS_CA_PATH=/ssl/ca-certificate.pem
ENABLE_MTLS=true

# ============================================================================
# SERVICE ENDPOINTS
# ============================================================================

# Internal Service URLs (Docker network)
IDENTITY_SERVICE_URL=http://identity-service:${IDENTITY_SERVICE_PORT}
VC_SERVICE_URL=http://vc-service:${VC_SERVICE_PORT}
PERMISSION_SERVICE_URL=http://permission-service:${PERMISSION_SERVICE_PORT}
RPC_GATEWAY_URL=http://rpc-gateway:${RPC_GATEWAY_PORT}
AUDIT_SERVICE_URL=http://audit-logger:${AUDIT_LOGGER_PORT}
PROTOCOL_INTEGRATIONS_URL=http://protocol-integrations:${PROTOCOL_INTEGRATIONS_PORT}

# External URLs (for client connections)
EXTERNAL_GATEWAY_URL=https://api.atp.dev
EXTERNAL_DOCS_URL=https://docs.atp.dev

# ============================================================================
# INFRASTRUCTURE SERVICES
# ============================================================================

# IPFS Configuration
IPFS_HOST=ipfs
IPFS_API_URL=http://${IPFS_HOST}:${IPFS_API_PORT}
IPFS_GATEWAY_URL=http://${IPFS_HOST}:${IPFS_GATEWAY_PORT}
IPFS_CLUSTER_SECRET=GENERATE_SECURE_IPFS_CLUSTER_SECRET

# Monitoring
PROMETHEUS_URL=http://prometheus:${PROMETHEUS_PORT}
GRAFANA_ADMIN_PASSWORD=SECURE_GRAFANA_ADMIN_PASSWORD
GRAFANA_SECRET_KEY=GENERATE_GRAFANA_SECRET_KEY

# ============================================================================
# SECURITY POLICIES
# ============================================================================

# CORS Configuration
CORS_ORIGIN=https://app.atp.dev,https://dashboard.atp.dev
CORS_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_AUTH_MAX=20

# Session Configuration
SESSION_SECRET=GENERATE_SECURE_SESSION_SECRET
SESSION_TIMEOUT=3600000

# ============================================================================
# OPERATIONAL CONFIGURATION
# ============================================================================

# Logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_MAX_SIZE=10MB
LOG_MAX_FILES=5
LOG_COMPRESS=true

# Health Checks
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# Performance
MAX_REQUEST_SIZE=10MB
REQUEST_TIMEOUT=30000
KEEP_ALIVE_TIMEOUT=5000

# ============================================================================
# DEVELOPMENT/TESTING (Remove in production)
# ============================================================================

# Debug
DEBUG_MODE=false
ENABLE_SWAGGER=false
ENABLE_METRICS_ENDPOINT=true

# Test Configuration
TEST_DATABASE_URL=postgresql://test_user:test_pass@localhost:5433/atp_test
MOCK_SERVICES=false 